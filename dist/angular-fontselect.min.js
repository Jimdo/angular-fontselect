/*! angular-fontselect v0.0.4 */
!function(a,b){"use strict";function c(a,b){return function(){return a.apply(b,arguments)}}function d(a,b){var c=this;return c.config=b,c.$http=a,c._init(),c}var e=a.module("jdFontselect",[]),f="Websafe Fonts",g="Google Fonts",h=[f,g],i=[{name:"Arial",key:"arial",category:"sansserif",stack:'Arial, "Helvetica Neue", Helvetica, sans-serif'},{name:"Courier New",key:"couriernew",category:"other",stack:'"Courier New", Courier, "Lucida Sans Typewriter", "Lucida Typewriter", monospace'},{name:"Verdana",key:"verdana",category:"sansserif",stack:"Verdana, Geneva, sans-serif"},{name:"Times New Roman",key:"timesnewroman",category:"serif",stack:'TimesNewRoman, "Times New Roman", Times, Baskerville, Georgia, serif'},{name:"Brush Script",key:"brushscript",category:"handwriting",stack:'"Brush Script MT", cursive'}];e.constant("jdFontselectConfig",{googleApiKey:!1}),e.filter("startFrom",function(){return function(b,c){return a.isArray(b)?b.slice(c):b}});var j=["name","key","stack"];d.prototype={_init:function(){var b=this;b._getGoogleFonts(),b._fonts=b._fonts||{},b._fonts[f]=a.copy(i)},getAllFonts:function(){return this._fonts},add:function(b,c){var d=this;if(a.isString(c)||(c=f),!d.isValidFontObject(b))throw"Invalid font object.";a.isArray(d._fonts[c])||(d._fonts[c]=[]),d._fonts[c].push(b)},isValidFontObject:function(b){if(!a.isObject(b))return!1;var c=!0;return a.forEach(j,function(d){a.isUndefined(b[d])&&(c=!1)}),c},getCategories:function(){return[{name:"Serif",key:"serif"},{name:"Sans-serif",key:"sansserif"},{name:"Handwriting",key:"handwriting"},{name:"Other",key:"other"}]},_createFontKey:function(a){return a.toLowerCase().replace(/[^a-z]/g,"-")},_getGoogleFonts:function(){var b=this;b.config.googleApiKey&&b.$http({method:"GET",url:"https://www.googleapis.com/webfonts/v1/webfonts",params:{key:b.config.googleApiKey}}).success(function(c){a.forEach(c.items,function(a){b.add({name:a.family,key:b._createFontKey(a.family),stack:'"'+a.family+'" sans-serif'},g)})})}},e.factory("jdFontselect.fonts",["$http","jdFontselectConfig",function(a,b){return new d(a,b)}]);var k=1,l=function(a,b){var c=this;c.fontsService=b,c.$scope=a,c.toScope(),c.name="FontselectController",c._construct()};l.prototype={_construct:function(){var a=this,d=a.$scope;d.fonts=a.fontsService.getAllFonts(),d.id=k++,d.providers=h,d.active=!1,d.categories=a.fontsService.getCategories(),d.current={provider:f,category:b,font:b,search:b},d.setCategoryFilter=c(a.setCategoryFilter,a),d.toggle=c(a.toggle,a)},toScope:function(){},toggle:function(){var a=this.$scope;a.active=!a.active},setCategoryFilter:function(a){var c=this.$scope.current;c.category=c.category===a?b:a},_resetIDs:function(){k=1}},l.$inject=["$scope","jdFontselect.fonts"],e.directive("jdFontselect",[function(){return{scope:{},restrict:"E",templateUrl:"fontselect.html",replace:!0,controller:l}}]),e.directive("jdFontlist",[function(){return{scope:{id:"&fsid",fonts:"=",current:"=",provider:"@"},restrict:"E",templateUrl:"fontlist.html",replace:!0,controller:["$scope","$filter",function(b,c){b.page={size:30,current:0},b.setCurrentPage=function(a){b.page.current=a},b.getPages=function(){var a=new Array(b.numberOfPages());return a.length<=1?[]:a},b.numberOfPages=function(){if(!a.isArray(b.fonts))return 0;var d=c("filter")(b.fonts,b.current.search);return d=c("filter")(b.fonts,{category:b.current.category},!0),Math.ceil(d.length/b.page.size)}}]}}]),a.module("jdFontselect").run(["$templateCache",function(a){a.put("fontlist.html",'<div><h3>{{provider}}</h3><ul><li ng-repeat="font in fonts | filter:current.search | filter:{category: current.category}:true | startFrom: page.current * page.size | limitTo: page.size "><input type=radio ng-model=current.font value={{font.key}} name=fs-{{id}}-font id=fs-{{id}}-font-{{font.key}}><label for=fs-{{id}}-font-{{font.key}} style="font-family: {{font.stack}}">{{font.name}}</label></li></ul><button ng-repeat="i in getPages() track by $index" ng-click=setCurrentPage($index)>{{$index + 1}}</button></div>'),a.put("fontselect.html",'<div class=fs-main id=fontselect-{{id}}><button ng-click=toggle()>Toggle</button><input type=hidden value={{current.font}}><div class=fs-window ng-show=active><input name=fs-{{id}}-search ng-model=current.search><div><button ng-repeat="category in categories" ng-class="{active: category.key == current.category}" ng-click=setCategoryFilter(category.key) ng-model=current.category>{{category.name}}</button></div><jd-fontlist fsid=id current=current fonts=fonts[provider] provider={{provider}} ng-repeat="provider in providers"></div></div>')}])}(angular);